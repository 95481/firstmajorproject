<% layout("./layouts/boilerplate")%>
<body>
    <div class="row">
        <div class="col-8 offset-2">
    <h1><b><%=showlisting.title%></b></h1></div>
    <div class="col-6 offset-2">
    <div class="card card-listings" >
        <img src="<%=showlisting.image%>" class="card-img-top show-image" alt="listing_image">
        <div class="card-body">
          <p class="card-text"><br>
            <%=showlisting.description%><br>
            &#x20B9;<%=showlisting.price.toLocaleString("en-IN")%><br>
           <%=showlisting.location%><br>
           <%=showlisting.country%> <br></p>
        </div>
    </div>
        
        <a href="/listings/<%=showlisting._id%>/edit%>" class="btn btn-dark edit-btn">edit</a><br>
        <form method="post"action="/listings/<%=showlisting._id%>?_method=delete"><button>DELETE</button></form>
    </div>
    <div class="col-8 offset-2 mb-3 mt-3">
    <hr/>
        <h4>Leave a Review</h4>
        <form action="/listings/<%=showlisting._id%>/reviews" method="post"  novalidate class="needs-validation">
        <div class="mt-3 mb-3">
            <label for="rating">Rating</label>
            <input type="range" name="review[rating]" id="rating" max="5" min="1" class="form-range">
        </div>
        <div class="mt-3 mb-3">
            <label for="comment" class="form-label">Comments</label>
            <textarea name="review[comment]" id="comment" cols="30" rows="5" class="form-control" required></textarea>
            <div class="invalid-feedback">Please Enter a Valid Review.</div>
        </div>
        <button class="btn btn-outline-dark ">Submit</button>
    </form>
    <hr/>
    <div>
        <h4>
            All Reviews
        </h4>
        <p>
            <div class="row">
            <%for(review of showlisting.reviews) {%>
                <!-- <li><%=review.comment%> , <%=review.rating%> star</li> -->
                  <div class="card col-5 mb-3 ms-3" >
                    <div class="card-body">
                      <h5 class="card-title">Jack</h5>
                      <p class="card-text"><%=review.comment%></p>
                      <p class="card-text"><%=review.rating%></p>
                    </div>
                    <form class="mb-3" method='post'action='/listings/<%=showlisting._id%>/reviews/<%=review._id%>?_method=delete'>
                    <button class="btn btn-sm btn-dark">Delete</button></form>
                  </div>
            <%}%>  
        </div>
        </p>
    </div>
    </div>
</div>
</body>
